(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},8:function(e,t,a){e.exports=a(9)},9:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),s=a(4),i=a(3),l=a(5),u=a(0),o=a.n(u),c=a(7),h=a.n(c),f=(a(15),3),p=Math.pow(7,2),d={GAME_OVER:"Game over!",GAME_WON:"You win!",null:"Good luck!"};function v(e){var t="square";return e.failSquare&&(t+=" fail"),o.a.createElement("button",{className:t,onClick:e.onClick,onContextMenu:e.onClick},e.value)}var m=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(a=Object(s.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).handleInput=function(e){var t=e.target.value;a.setState({value:t}),a.props.handleSlider(t)},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.min,n=e.max,r=e.step,s=e.publicValue;return o.a.createElement("div",{className:"slidecontainer"},o.a.createElement("input",{type:"range",className:"slider",min:a,max:n,step:r,value:t,onChange:this.handleInput}),o.a.createElement("span",null,s))}}]),t}(o.a.Component),y=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t,a=this.props.size;e=t=Math.sqrt(a);for(var n=[],r=0;r<e;r++){for(var s=[],i=0;i<t;i++)s.push(this.renderSquare(r*e+i));n.push(o.a.createElement("div",{className:"board-row",key:r},s))}return o.a.createElement("div",{className:"board"},n)}},{key:"handleClick",value:function(e,t){t.preventDefault(),"click"===t.type?this.props.onClick(e):"contextmenu"===t.type&&this.props.addFlag(e)}},{key:"renderSquare",value:function(e){var t=this;return o.a.createElement(v,{onClick:function(a){return t.handleClick(e,a)},value:this.renderValue(e),key:e,failSquare:this.props.failSquare===e})}},{key:"renderValue",value:function(e){return"GAME_OVER"===this.props.status?this.props.squares[e]:this.props.history.includes(e)?this.props.squares[e]:this.props.flags.includes(e)?"?":o.a.createElement("span",{className:"index"},e)}}]),t}(o.a.Component),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).containsAllElements=function(e,t){return t.every(function(t){return e.includes(t)})},a.state={squares:[],history:[],flags:[],status:null,size:p,failSquare:null,complexity:f},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"printDebug",value:function(e){for(var t=Math.sqrt(e.length),a="",n=0;n<e.length;n++)0!==n&&n%t===0&&(a+="\n"),a+=e[n];console.log(a)}},{key:"handleClick",value:function(e){var t=this.state,a=t.squares,n=t.size;if(!a.length){var r=n*(this.state.complexity/100);if(n-r<1)return void this.setState({complexity:f});a=this.initSquares(e,n,r),this.printDebug(a)}var s=this.state,i=s.status,l=s.failSquare;if("GAME_OVER"!==i&&"GAME_WON"!==i){var u=this.state.history.slice();if(!u.includes(e)){var o=a[e];if(0===o){var c=this.openClosestZeroSquares(e,a,u);console.log(c),u=u.concat(c)}else"X"===o&&(i="GAME_OVER",u=a,l=e);u=u.concat(e),this.isGameWon(a,u)&&(i="GAME_WON"),this.setState({squares:a,history:u,status:i,failSquare:l})}}}},{key:"openClosestZeroSquares",value:function(e,t,a){var n=function(e,t){return void 0!==e&&e>=0&&e<t.length&&"X"!==t[e]},r=function e(a,r){return r.has(a)?r:(n(a,t)&&r.add(a),r=i(a-u,r),r=l(a+u,r),a%u===0?r:e(a-1,r))},s=function e(a,r){return r.has(a)?r:(n(a,t)&&r.add(a),r=l(a+u,r),r=i(a-u,r),(a+1)%u===0?r:e(a+1,r))},i=function e(a,i){return i.has(a)?i:(n(a,t)&&i.add(a),a-u<0?i:(i=s(a+1,i),i=r(a-1,i),e(a-u,i)))},l=function e(a,i){return i.has(a)?i:(n(a,t)&&i.add(a),a+u>t.length?i:(i=s(a+1,i),i=r(a-1,i),e(a+u,i)))},u=Math.sqrt(t.length),o=new Set(a);return o=r(e,o),Array.from(o)}},{key:"isGameWon",value:function(e,t){var a=e.map(function(e,t){return"X"!==e?t:void 0}).filter(function(e){return void 0!==e});return this.containsAllElements(t,a)}},{key:"initSquares",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=Array(t).fill(null),r=0;r<a;){var s=Math.floor(Math.random()*t);s!==e&&"X"!==n[s]&&(n[s]="X",r++)}for(var i=Math.sqrt(t),l=0;l<i;l++)for(var u=0;u<i;u++){var o=l*i+u;if("X"!==n[o]){var c=0;"X"===n[o-i]&&c++,"X"===n[o+i]&&c++,o%i!==0&&("X"===n[o-1]&&c++,"X"===n[o-(i+1)]&&c++,"X"===n[o+(i-1)]&&c++),(o+1)%i!==0&&("X"===n[o+1]&&c++,"X"===n[o-(i-1)]&&c++,"X"===n[o+(i+1)]&&c++),n[o]=c}}return n}},{key:"restartGame",value:function(){this.setState({squares:[],history:[],flags:[],status:null,failSquare:null})}},{key:"changeSize",value:function(e){this.setState({size:e}),this.restartGame()}},{key:"handleAddFlag",value:function(e){var t=this.state.flags;t.includes(e)?this.setState({flags:t.filter(function(t,a,n){return t!==e})}):this.setState({flags:t.concat(e)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.status,n=t.squares,r=t.history,s=t.flags,i=t.size,l=t.complexity,u=t.failSquare,c=d[a];return o.a.createElement("div",null,o.a.createElement("h1",{className:"status"},c),o.a.createElement(y,{squares:n,history:r,flags:s,failSquare:u,status:a,onClick:function(t){return e.handleClick(t)},size:i,addFlag:function(t){return e.handleAddFlag(t)}}),o.a.createElement("button",{className:"btn",onClick:function(){return e.restartGame()}},"Restart"),o.a.createElement("p",null,"Choose complexity:"),o.a.createElement(m,{value:l,publicValue:l,min:1,max:99,handleSlider:function(t){return e.setState({complexity:t})}}),o.a.createElement("p",null,"Choose board size:"),o.a.createElement(m,{value:Math.sqrt(i),min:2,max:25,step:1,handleSlider:function(t){return e.changeSize(t*t)},publicValue:i}))}}]),t}(o.a.Component);h.a.render(o.a.createElement(k,null),document.getElementById("root"))}},[[8,1,2]]]);
//# sourceMappingURL=main.e5d0fcaa.chunk.js.map